event: message
data: {"jsonrpc":"2.0","id":1,"result":{"contents":[{"uri":"ui://widget/example.html","mimeType":"text/html+skybridge","text":"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\"/>\n    <style>\n        body {\n            font-family: sans-serif;\n            background: #f5f5f5;\n            margin: 0;\n        }\n\n        .chat-container {\n            max-width: 650px;\n            margin: 0 auto;\n            padding: 20px;\n            display: flex;\n            flex-direction: column;\n            gap: 12px;\n        }\n\n        .bubble {\n            padding: 12px 16px;\n            border-radius: 12px;\n            max-width: 80%;\n            line-height: 1.4;\n        }\n\n        .bot {\n            background: #fff;\n            border: 1px solid #ddd;\n        }\n\n        .user {\n            background: #d0ebff;\n            border: 1px solid #a5d8ff;\n            align-self: flex-end;\n        }\n\n        form {\n            background: #fff;\n            border-top: 1px solid #ddd;\n            padding: 16px;\n            display: flex;\n            gap: 10px;\n            position: sticky;\n            bottom: 0;\n        }\n\n        input {\n            flex: 1;\n            font-size: 16px;\n            padding: 10px;\n            border-radius: 6px;\n            border: 1px solid #ccc;\n        }\n\n        button {\n            padding: 10px 20px;\n            font-size: 16px;\n            background: #007bff;\n            color: #fff;\n            border: none;\n            border-radius: 6px;\n            cursor: pointer;\n        }\n\n        button:hover {\n            background: #0069d9;\n        }\n    </style>\n</head>\n<body>\n\n<div id=\"chat\" class=\"chat-container\"></div>\n\n<form id=\"form\">\n    <input id=\"input\" type=\"text\" placeholder=\"Type a pizza topping‚Ä¶\" required/>\n    <button type=\"submit\">Send</button>\n</form>\n\n<script>\n    const chat = document.getElementById(\"chat\");\n    const form = document.getElementById(\"form\");\n    const input = document.getElementById(\"input\");\n\n    function bot(text) {\n        const div = document.createElement(\"div\");\n        div.className = \"bubble bot\";\n        div.textContent = text;\n        chat.appendChild(div);\n    }\n\n    function user(text) {\n        const div = document.createElement(\"div\");\n        div.className = \"bubble user\";\n        div.textContent = text;\n        chat.appendChild(div);\n    }\n\n    const output = window.openai?.toolOutput;\n    const meta = window.openai?.toolResponseMetadata;\n\n    bot(\"Hello! üëã Welcome to the Pizza Widget.\");\n    bot(\"Please type a pizza topping:\");\n\n    if (output && typeof output === \"object\") {\n        bot(\"Received from server (structuredContent):\");\n        bot(JSON.stringify(output, null, 2));\n\n        if (output.pizzaTopping) {\n            bot(\"üçï Your topping from the server is: \" + output.pizzaTopping);\n        }\n    }\n\n    form.addEventListener(\"submit\", (e) => {\n        e.preventDefault();\n        const topping = input.value.trim();\n        if (!topping) return;\n\n        user(topping);\n\n        bot(\"Here is your pizza with \" + topping + \" üçï\");\n\n        input.value = \"\";\n    });\n</script>\n\n</body>\n</html>\n\n\n<!--<!DOCTYPE html>-->\n<!--<html>-->\n<!--  <body style=\"font-family: sans-serif;\">-->\n<!--    <h1 style=\"color: red\">Widget Loaded!</h1>-->\n<!--    <p id=\"topic\">Loading‚Ä¶</p>-->\n\n<!--    <script>-->\n<!--      const output = window.openai.toolOutput;-->\n<!--      const meta = window.openai.toolResponseMetadata;-->\n\n<!--      document.getElementById(\"topic\").textContent =-->\n<!--        \"Tool output: \" + JSON.stringify(output);-->\n<!--    </script>-->\n<!--  </body>-->\n<!--</html>-->\n"}]}}

